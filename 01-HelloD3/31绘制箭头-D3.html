
<!--http://www.ourd3js.com/wordpress/?p=660 -->
<!--绘制箭头 -->

<html>
<head>
    <meta charset="utf-8">
    <title>绘制箭头</title>
</head>
<body>
<defs>
<marker id="arrow" 
        markerUnits="strokeWidth" 
        markerWidth="12" 
        markerHeight="12" 
        viewBox="0 0 12 12" 
        refX="6" 
        refY="6" 
        orient="auto">
        <path d="M2,2 L10,6 L2,10 L6,6 L2,2" style="fill: #000000;" />
</marker>
</defs>

    <script src="../d3.js" charset="utf-8"></script>
    <script type="text/javascript">
        var width = 1000;
        var height = 1000;
        //定义一个布局
        var svg = d3.select("body").append("svg")
                    .attr("width", width)
                    .attr("height", height);
        // 定义箭头的标识
        var defs = svg.append("defs");
        var arrowMarker = defs.append("marker")
                              .attr("id","arrow")
                              .attr("markerUnits","strokeWidth")
                              .attr("markerWidth","12")
                              .attr("markerHeight","12")
                              .attr("viewBox","0 0 12 12")
                              .attr("refX","6")
                              .attr("refY","6")
                              .attr("orient","auto");
        var arrow_path = "M2,2 L10,6 L2,10 L6,6 L2,2";
        arrowMarker.append("path")
                   .attr("d",arrow_path)
                   .attr("fill","#000");

        //绘制直线
        var line = svg.append("line")
                      .attr("x1",0)
                      .attr("y1",0)
                      .attr("x2",200)
                      .attr("y2",50)
                      .attr("stroke","red")
                      .attr("stroke-width",2)
                      .attr("marker-end","url(#arrow");
        //绘制曲线
        var curve_path = "M20,70 T80,100 T160,80 T200,90";
        var curve = svg.append("path")
                       .attr("d",curve_path)  
                       .attr("fill","white")   
                       .attr("stroke","red")  
                       .attr("stroke-width",2)
                       .attr("marker-start","url(#arrow")
                       .attr("marker-mid","url(#arrow")
                       .attr("marker-end","url(#arrow");  

    </script>
</body>
</html>