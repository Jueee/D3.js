
<!--http://www.ourd3js.com/wordpress/?p=656 -->
<!--分区图的函数 -->

<html>
<head>
    <meta charset="utf-8">
    <title>分区图的函数</title>
</head>
<body>
<p>分区图的布局比较简单，本章介绍一下分区图的参数。</p>
<p>其函数有6个。</p>
<h1 style="font-size: 30px;">nodes()</h1>
<p>将根数据传入后，得到的节点的数组，每个节点添加8个参数：</p>
<ul>
<li>parent &#8211; 父节点</li>
<li>children &#8211; 子节点</li>
<li>value &#8211; 表示节点的大小，由下面 value() 函数指定的值，父节点的值等于子节点值的和</li>
<li>depth &#8211; 节点的深度</li>
<li>x &#8211; 节点的x方向的坐标（不一定指x轴方向，跟据 size() 函数的意义而定）</li>
<li>y &#8211; 节点的y方向的坐标（同上）</li>
<li>dx &#8211; x方向扩展的宽度（同上）</li>
<li>dy &#8211; y方向扩展的宽度（同上）</li>
</ul>
<h1 style="font-size: 30px;">links()</h1>
<p>将上述节点数组传入后，得到连接线的关系，起点和终点分别存在 source 和 target 变量中。</p>
<h1 style="font-size: 30px;">children()</h1>
<p>指定表示子节点的字符串。默认是：</p>

function children(d) {
  return d.children;
}
<p>表示在 JSON 文件中，子节点的变量符号用 children 表示：</p>
<textarea>
{
"name":"中国",
"children":
[
    { 
      "name":"浙江" , 
      "children":
      [
            {"name":"杭州" },
            {"name":"宁波" },
            {"name":"温州" },
            {"name":"绍兴" }
      ] 
    }
]
}</textarea>
<p></p>
<h1 style="font-size: 30px;">sort()</h1>
<p>指定对同深度的节点进行排序的函数。如果不排序，则按照默认顺序显示。排序函数与JavaScript 相同：</p>

<textarea>
function comparator(a, b) {
  return b.value - a.value;
}</textarea>

<p>对于以上函数，如果第一个参数应该位于第二个参数之前则需令其返回一个负数，如果相等则返回0，如果第一个参数应该位于第二个之后，则令其返回一个正数。</p>
<h1 style="font-size: 30px;">value()</h1>
<p>设定用哪一个值来表示节点大小。如：</p>
<textarea>
function value(d) {
  return d.size;
}</textarea>
<p>这样设定的话，用节点里的 size 值来表示节点的大小。</p>
<h1 style="font-size: 30px;">size()</h1>
<p>设置分区图的范围。【<a href="www.ourd3js.com/wordpress/?p=643">进阶 &#8211; 第 3.0 章</a>】和【<a href="http://www.ourd3js.com/wordpress/?p=653">进阶 &#8211; 第 3.1 章</a>】中展示了当 size 函数的设定不同时，图表如何不同。</p>
<p>如果是方形的：size( [ width , height ] )</p>
<p>如果是圆形的：size( [ 2 * Math.PI, radius * radius ] )      // radius 为圆的半径</p>
</body>
</html>